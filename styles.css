*{box-sizing:border-box}
body{font-family:Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans CJK SC", sans-serif;margin:0;background:#f7f9fc;color:#222}
.site-header{background:#246; color:#fff;padding:18px 16px}
.site-header h1{margin:0;font-size:1.25rem}
.app-layout{display:flex;gap:14px;max-width:1200px;margin:18px auto;padding:0 12px}
.sidebar{width:220px;background:#fff;border-radius:6px;padding:12px;box-shadow:0 1px 4px rgba(0,0,0,0.06)}
.sheet-nav{display:flex;gap:6px;justify-content:flex-start;margin-bottom:8px}
.sheet-nav button{padding:6px 8px;border-radius:4px;border:1px solid #ddd;background:#f5f7fa;cursor:pointer}
.sheets-list{max-height:320px;overflow:auto;border-top:1px solid #f0f2f5;padding-top:8px}
.sheets-list .sheet-item{padding:8px;border-radius:4px;margin-bottom:6px;cursor:pointer}
.sheets-list .sheet-item.active{background:#eaf4ff}
.actions{margin-top:10px}
.main-area{flex:1}
.controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-bottom:12px}
.controls input[type="date"], .controls input[type="text"]{padding:8px;border:1px solid #ccd; border-radius:4px}
#exportDataBtn,
#importDataBtn,
#deleteBtn,
#deleteAllBtn,
#statBtn,
#toggleRestBtn,
#newBtn,
#createSheet,
#cancelCreate,
#rangeModalApply,
#rangeModalCancel,
#addMemberBtn,
#statModalApply,
#statModalCancel,
#delMemberBtn
{
  background:#246;color:#fff;border:0;padding:8px 12px;border-radius:4px;cursor:pointer
}
#rangeModalApply,
#statModalApply,
#createSheet
{
  background:#62bd35
}
#deleteBtn,
#deleteAllBtn,
#delMemberBtn
{
  background:#d33
}
#rangeModalCancel,
#statModalCancel,
#cancelCreate
{
  background:#999
}
.table-wrap{overflow:visible;background:#fff;border-radius:6px;box-shadow:0 1px 3px rgba(0,0,0,0.06);padding:12px}
/* 列が多いときに表を水平スクロール可能にする。自動幅と最小列幅を設定して可読性を向上 */
table{width:max-content; min-width:100%; border-collapse:collapse; table-layout:fixed}
th,td{padding:8px 10px;text-align:left;border-bottom:1px solid #eef;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;min-width:80px}
th{background:#e2efff;font-weight:600;position:sticky;top:0;z-index:2}
table tr:nth-child(even){background-color: #f3f3f3;}
#tableContainer table tr:nth-child(even){background-color: #fff;}
.weekday{font-size:0.8rem;color:#666}
.weekend{background:#fafafa;color:#999}
.cell-weekend{background:#f9fbfd;color:#9aa}
/* 半休セル：通常の稼働日/休日と視覚的に区別する */
.cell-halfrest{background:#ccc;color:#3b2f00}
/* 今日列のハイライト：滑らかなグラデーションで色がゆっくり変化するアニメーション */
.col-today{
  animation: gradientShift 8s ease infinite;
  background: linear-gradient(90deg,#fff7e6,#e6f7ff,#e6ffe6,#fff7e6);
  background-size: 300% 300%;
}
@keyframes gradientShift{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* 今日列の左右に流れる細いラインを追加して、境界が流れるように見せる */
.col-today{
  position:relative; /* 擬似要素を配置するため */
}
.col-today::before,
.col-today::after{
  content: '';
  position: absolute;
  top: 4px;
  bottom: 4px;
  width: 4px;
  pointer-events: none;
  z-index: 5;
  border-radius: 2px;
  background: linear-gradient(180deg, #f38ab1, #d40faa, #00c6ff, #7bff00);
  background-size: 200% 200%;
  animation: gradientShiftBorder 3.5s linear infinite;
  opacity: 0.95;
}
.col-today::before{ left: 2px; }
.col-today::after{ right: 2px; }
@keyframes gradientShiftBorder{
  0%{ background-position:0% 0% }
  50%{ background-position:100% 100% }
  100%{ background-position:0% 0% }
}
.member-name{width:50px;min-width:50px;position:sticky;left:0;background:#fff;z-index:3}
.member-name input{width:100%;border:1px solid transparent;padding:6px;border-radius:4px}
.member-name th, .member-name { /* ヘッダーの名前セルがスクロール時に重なって表示されるようにする */
  z-index:6;
}
.member-name input:focus{border-color:#cde}
.day-inputs{display:flex;flex-direction:column;gap:6px;align-items:flex-start}
.day-inputs input{width:44px;padding:6px;border:1px solid #ddd;border-radius:4px;text-align:center}
.day-inputs select{width:100%;max-width:120px;padding:6px;border:1px solid #ddd;border-radius:4px;background:#fff;font-size:0.95rem}
.sheet-title{font-weight:600;margin-bottom:8px}

/* メンバーごとの日別実働時間行 */
.member-daily-hours-row td{background:#fbfdff;color:#246;font-size:0.9rem;padding:6px 8px;border-bottom:1px solid #eef;text-align:center}
.member-daily-hours-row .member-name{font-weight:600;background:#fff}
.member-daily-hours{color:#246}

/* カレンダーグリッド（モーダル内） */
#calendarSaveBtn{display: none;}
.calendar-grid{display:grid;grid-template-columns:repeat(7, 1fr);gap:6px;margin-top:8px;flex:1 1 auto;overflow:auto;padding-bottom:8px}
.calendar-cell{background:#fff;border:1px solid #e6edf5;border-radius:6px;padding:8px;min-height:140px;position:relative}
.calendar-cell .date-label{position:absolute;top:6px;left:8px;font-size:0.85rem;color:#666}
.calendar-cell .work-summary{margin-top:20px;font-size:0.95rem;color:#246}
.calendar-cell .note{margin-top:6px;font-size:0.85rem;color:#444;border-top:1px dashed #eee;padding-top:4px}
.calendar-cell.weekend{background:#fafafa;color:#999}
.calendar-cell.today{box-shadow:0 0 0 3px rgba(34,128,255,0.06);border-color:#2aa0ff}
/* 明示的に休みに変更された日を緑で強調 */
.calendar-cell.rest{background:linear-gradient(180deg,#eef9ef,#e6fff0);border-color:#bff0c6}
.calendar-cell .time-range{margin-top:20px;font-size:0.85rem;color:#246}

/* 曜日ヘッダをグリッド全幅に広げ、7列で並べる */
.calendar-weekdays{grid-column:1 / -1;display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-bottom:0}
.weekday-header{background:transparent;text-align:center;padding:6px 4px;font-weight:700;color:#444;border-radius:4px}

/* 空セル（先頭と末尾のダミー）を目立たせず最小高さにする */
.calendar-cell.empty{background:transparent;border:0;box-shadow:none;min-height:20px}

/* メイン表のセルに表示する備考アイコン */
.cell-note-indicator{position:absolute;right:6px;top:6px;font-size:0.9rem}
.cell-time-summary{display:block;margin-top:6px;font-size:0.85rem;color:#444}

/* 備考ポップオーバー */
.note-popover{position:fixed;z-index:120;left:50%;top:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.35);display:flex;align-items:center;justify-content:center}
.note-popover-content{background:#fff;padding:12px;border-radius:8px;min-width:320px;box-shadow:0 8px 24px rgba(0,0,0,0.18)}
.note-popover textarea{font-family:inherit}
.cell-note-text{font-size:0.85rem;color:#333;background:rgba(250,250,250,0.6);padding:2px 6px;border-radius:4px;margin-top:6px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

/* 備考を示す小さなバッジ（セル右上） */
.cell-note-badge{position:absolute;top:6px;right:6px;width:20px;height:20px;border-radius:50%;background:#fff;border:1px solid #2a9df4;display:flex;align-items:center;justify-content:center;font-size:12px;color:#2a9df4;cursor:pointer;box-shadow:0 1px 3px rgba(0,0,0,0.12)}
.cell-note-badge:hover{transform:scale(1.08);box-shadow:0 2px 6px rgba(0,0,0,0.16)}

/* 列が切り替え可能であることを示す（ホバーでヒント） */
thead th{cursor:default}
thead th:hover{background:#eaf2ff}

/* modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.3);z-index: 99;padding:20px}
.modal[aria-hidden="false"]{display:flex}
.modal-content{background:#fff;padding:12px;border-radius:8px;min-width:320px;box-shadow:0 6px 18px rgba(0,0,0,0.12);display:flex;flex-direction:column;max-height:calc(100vh - 40px);overflow:hidden;width:min(95vw,1000px)}
.form-row{display:flex;gap:8px;align-items:center;margin:8px 0}
.form-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}

/* 共通ボタンスタイル */
.btn{background:#246;color:#fff;border:0;padding:8px 10px;border-radius:6px;cursor:pointer;font-size:0.95rem}
.btn[disabled]{opacity:0.6;cursor:not-allowed}
.btn-secondary{background:#f5f7fa;color:#333;border:1px solid #d8dce6}
.modal-content .btn{min-width:84px}

/* 操作列（カレンダーボタン＋タイプ選択＋削除）が横並びで中央揃えになるようにする */
.cell-ops{align-items:center;gap:8px}
.cell-ops .btn{padding:6px 8px;font-size:0.9rem}
.cell-ops select{padding:6px;border:1px solid #dcdfe6;border-radius:4px;background:#fff}
.cell-ops .member-total-hours{display:block}

/* 小さめのボタン（削除など） */
.btn.small{padding:4px 8px;font-size:0.85rem}

/* モーダル内部のフッターを常に表示する：カレンダーなど高さのある内容はスクロールさせる */
.modal-content .form-actions{position:sticky;bottom:0;background:linear-gradient(to top, rgba(255,255,255,0.95), rgba(255,255,255,0.6));padding-top:8px;margin-top:8px}

@media (max-width:900px){
  .app-layout{flex-direction:column;padding:12px}
  .sidebar{width:100%}
  .member-name{width:140px}
  .day-inputs input{width:34px}
  /* .modal-content{width: max-content;} */
}

.site-footer{max-width:1200px;margin:14px auto;padding:0 16px;color:#666}
